import{_ as S,r as _,u as q,a as w,b as p,o as m,c as h,d as n,w as C,v as P,e as k,f as r,g as s,h as U,p as N,i as z,E as f}from"./index-DGSYi3EO.js";import{u as A,r as D}from"./api-D7mIgXGH.js";const M="/chuanzhi-cup/assets/loginImage-BMxIfJyG.png",E=c=>(N("data-v-53c0f1ca"),c=c(),z(),c),F={class:"item-login"},G={class:"item-login-wrap"},J=E(()=>n("div",{class:"item-login-left"},[n("img",{src:M,alt:"登录图片",class:"item-login-left-image"})],-1)),T={class:"item-login-right"},Y={class:"hanging-circle"},Z=E(()=>n("div",{class:"wire"},null,-1)),$={class:"item-login-right-main"},j={key:0,class:"item-login-right-main-title"},H={key:1,class:"item-login-right-main-title"},K={__name:"login",setup(c){const v=A(),g=_(null),I=q(),u=w({isLogin:!0,captchaUrl:"",loading:!1,year:new Date().getFullYear()}),d=w({username:"",password:""}),l=w({username:"",password:"",confirmPassword:""}),y=_({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:(a,e,o)=>{e?/^[a-zA-Z0-9]+$/.test(e)?o():o(new Error("用户名只能是英文和数字")):o(new Error("用户名不能为空"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],captcha:[{required:!0,message:"validate.required",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(a,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==l.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]}),V=_(!0),L=()=>{g.value.validate(async a=>{if(console.log(a),a){await v.getUserInfo(d);const e=v.code;console.log(e),e===0?(f({message:"登录成功",type:"success"}),I.replace("/home")):e!==0&&f({message:"用户名或密码错误",type:"error"})}})},B=()=>{g.value.validate(async a=>{console.log(a),a&&D(l).then(e=>{console.log(e),e.code===0?(f({message:e.msg,type:"success"}),u.isLogin=!0):f({message:e.msg,type:"error"})})})},R=()=>{u.isLogin=!u.isLogin,V.value=!1};return(a,e)=>{const o=p("el-input"),i=p("el-form-item"),b=p("el-button"),x=p("el-form");return m(),h("div",F,[n("div",G,[J,n("div",T,[C(n("div",Y,[Z,n("div",{class:"circle",onClick:R},"注册")],512),[[P,V.value]]),n("div",$,[u.isLogin?(m(),h("div",j,"登录")):(m(),h("div",H,"注册")),u.isLogin?(m(),k(x,{key:2,"label-width":"8rem",model:d,rules:y.value,ref_key:"formRef",ref:g},{default:r(()=>[s(i,{label:"用户名",prop:"username"},{default:r(()=>[s(o,{modelValue:d.username,"onUpdate:modelValue":e[0]||(e[0]=t=>d.username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(i,{label:"密码",prop:"password"},{default:r(()=>[s(o,{modelValue:d.password,"onUpdate:modelValue":e[1]||(e[1]=t=>d.password=t),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{"label-width":"0"},{default:r(()=>[s(b,{type:"primary",onClick:L,class:"item-login-right-main-btn"},{default:r(()=>[U("登录")]),_:1})]),_:1})]),_:1},8,["model","rules"])):(m(),k(x,{key:3,"label-width":"8rem",model:l,rules:y.value,ref_key:"formRef",ref:g},{default:r(()=>[s(i,{label:"用户名",prop:"username"},{default:r(()=>[s(o,{modelValue:l.username,"onUpdate:modelValue":e[2]||(e[2]=t=>l.username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(i,{label:"密码",prop:"password"},{default:r(()=>[s(o,{modelValue:l.password,"onUpdate:modelValue":e[3]||(e[3]=t=>l.password=t),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{label:"确认密码",prop:"confirmPassword"},{default:r(()=>[s(o,{modelValue:l.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=t=>l.confirmPassword=t),placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{"label-width":"0"},{default:r(()=>[s(b,{type:"primary",onClick:B,class:"item-login-right-main-btn"},{default:r(()=>[U("注册")]),_:1})]),_:1})]),_:1},8,["model","rules"]))])])])])}}},W=S(K,[["__scopeId","data-v-53c0f1ca"]]);export{W as default};
