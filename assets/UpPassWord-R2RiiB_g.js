import{i as V}from"./api-D7mIgXGH.js";import{_ as x,u as I,r as p,b as n,o as c,c as w,g as s,f as d,G as U,t as C,I as k,F as E,d as _,h as N,p as S,i as q,E as f}from"./index-DGSYi3EO.js";const B=u=>(S("data-v-54201fa5"),u=u(),q(),u),F=B(()=>_("h3",{class:"show-box-title"},"修改密码",-1)),W={style:{display:"flex","justify-content":"center",margin:"2rem"}},j={__name:"UpPassWord",setup(u){const g=I(),a=p(""),r=p(!1),e=p({password:"",newPassword:"",confirmPassword:""}),v=p({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}]}),P=async()=>{if(e.value.newPassword!==e.value.confirmPassword){a.value="新密码和确认密码不匹配",r.value=!0;return}const l=await V(e.value);console.log(l),console.log(e.value),l.code===0?(a.value="修改成功",r.value=!1,f({message:"修改成功",type:"success"}),g.push("/person/userInfo")):(a.value=l.msg,r.value=!0,f({message:l.msg,type:"error"}),e.value={password:"",newPassword:"",confirmPassword:""})};return(l,o)=>{const b=n("el-divider"),m=n("el-input"),i=n("el-form-item"),y=n("el-button"),h=n("el-form");return c(),w(E,null,[F,s(b,{"content-position":"left"}),s(h,{model:e.value,"label-width":"10rem",style:{"margin-top":"3rem",width:"600px",position:"relative",padding:"2rem"},rules:v.value},{default:d(()=>[s(i,{label:"原密码：",prop:"password"},{default:d(()=>[s(m,{modelValue:e.value.password,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.password=t),type:"password","show-password":"",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),s(i,{label:"新密码：",prop:"newPassword"},{default:d(()=>[s(m,{modelValue:e.value.newPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.newPassword=t),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),s(i,{label:"确认密码：",prop:"confirmPassword"},{default:d(()=>[s(m,{modelValue:e.value.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.confirmPassword=t),type:"password","show-password":"",placeholder:"请确认新密码"},null,8,["modelValue"])]),_:1}),_("div",W,[s(y,{type:"primary",class:"btn-submit",onClick:P},{default:d(()=>[N("提交")]),_:1})])]),_:1},8,["model","rules"]),a.value?(c(),w("div",{key:0,class:U([{error:r.value,success:!r.value},"message"])},C(a.value),3)):k("",!0)],64)}}},G=x(j,[["__scopeId","data-v-54201fa5"]]);export{G as default};
